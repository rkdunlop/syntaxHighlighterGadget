<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="hello world example" />  
  <UserPref name="url" display_name="Name" dataType="string" />
  <Content type="html">
     <![CDATA[ 
       <div id="content_div">
       	<pre class="brush: js">
      	function foo()
      	{
      	}
      	</pre>
       </div>
	<link href="https://rkdunlop.github.io/syntaxHighlighterGadget/styles/shCore.css" rel="stylesheet" type="text/css" />
	<link href="https://rkdunlop.github.io/syntaxHighlighterGadget/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
      	<script src="https://rkdunlop.github.io/syntaxHighlighterGadget/js/shCore.js" type="text/javascript"></script>
      	<script src="https://rkdunlop.github.io/syntaxHighlighterGadget/js/shAutoloader.js" type="text/javascript"></script>
      		
	<script type="text/javascript">
	var prefs = new gadgets.Prefs();

	function getHtml() {
		var params = {};
		params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.DOM;  
		var url = prefs.getString("url");
		console.log(url);
		gadgets.io.makeRequest(url, response, params);
	}
	
	function response(obj) {
		console.log(obj);
		var str = obj.text;
		parser = new DOMParser();
		htmlDoc = parser.parseFromString("str", "text/xml");
		code = htmlDoc.getElementsByTagName('pre');
		console.log(code);
		document.getElementById('content_div').innerHTML = code.innerHTML;
	}
	gadgets.util.registerOnLoadHandler(getHtml);
	</script>

      
      	<!-- Finally, to actually run the highlighter, you need to include this JS on your page -->
      	<script type="text/javascript">
      		 SyntaxHighlighter.all()
      	</script>
     ]]>
  </Content> 
</Module>
